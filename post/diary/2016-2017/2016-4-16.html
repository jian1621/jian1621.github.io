<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android开发的基础知识总结2 | 刘宣华</title>
    <meta name="description" content="主要介绍activity的基础知识。">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.DHEJDGuR.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DeXU6VJF.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.BM1eVnFx.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BVgKs9HZ.js">
    <link rel="modulepreload" href="/assets/post_diary_2016-2017_2016-4-16.md.Bm8eobNH.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>首页</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/post/input/input_2025_3.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>在写</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/post/output/output_2025_3.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>在读</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/post/list100/todo_2025.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>List100</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/post/diary/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>日记</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _post_diary_2016-2017_2016-4-16" data-v-39a288b8><div><blockquote><p>参考文章:</p></blockquote><ul><li>郭神--第一行代码</li><li><a href="http://www.cnblogs.com/lwbqqyumidi/p/3769113.html" target="_blank" rel="noreferrer">Activity的生命周期--cornblog</a></li><li><a href="http://www.cnblogs.com/kofi1122/archive/2011/04/10/2011772.html" target="_blank" rel="noreferrer">Activity生命周期之我见--kofi1122</a></li><li><a href="http://blog.csdn.net/android_tutor/article/details/5772285" target="_blank" rel="noreferrer">两分钟彻底让你明白Android Activity生命周期(图文)--Android_Tutor</a></li><li><a href="http://blog.csdn.net/liuhe688/article/details/6733407" target="_blank" rel="noreferrer">总结篇之activity--scott</a></li></ul><h3 id="返回栈" tabindex="-1">返回栈 <a class="header-anchor" href="#返回栈" aria-label="Permalink to &quot;返回栈&quot;">​</a></h3><p>使用任务栈来管理活动，当back键或finish()方法销毁一个活动时，处于栈顶的栈会出栈。前一个活动会处于栈顶。系统总会显示在栈顶的活动。</p><h4 id="活动状态" tabindex="-1">活动状态 <a class="header-anchor" href="#活动状态" aria-label="Permalink to &quot;活动状态&quot;">​</a></h4><ul><li>运行状态：即在栈顶的活动。</li><li>暂停状态：一个活动不再处于栈顶，但可见时，活动进入暂停状态。（类似模态对话框，即一个小activity是当前活动，但不能完全覆盖背景activity,背景activity依旧可见。这样背景activity就进入暂停状态。）</li><li>停止状态：一个活动不是在栈顶位置，而且完全不可见，其进入停止状态。当内存非常紧缺的时候，这些活动会被回收，需要非常注意其可靠性。</li><li>销毁状态：从返回栈中出栈后，该活动就成为了销毁状态。</li></ul><h3 id="生命周期" tabindex="-1">生命周期 <a class="header-anchor" href="#生命周期" aria-label="Permalink to &quot;生命周期&quot;">​</a></h3><ul><li>onCreate(): 在活动第一次创建的时候被调用，完成一些数据的初始化工作。</li><li>OnStart(): 在活动由不可见变为可见的时候调用。</li><li>OnResume(): 活动准备好与用户交互时调用，活动一定处于栈顶，而且为运行状态。</li><li>OnPause(): 在准备启动或恢复另一个活动时调用，消耗时间要尽量少，以免影响另一个活动的运行。</li><li>OnStop(): 活动完全不可见时调用，与OnPause()区别在于如果启动的一个新活动是对话框式的活动，则执行OnPause()而非OnStop();</li><li>OnDestroy(): 活动被销毁之前调用，调用之后，活动被销毁。</li><li>OnRestart(): 由停止变为可运行状态前调用。</li><li>OnCreate()&lt;-----&gt;OnDestory():完整的生命周期</li><li>OnStart()&lt;---------&gt;OnStop():可见生存周期</li><li>OnResume()&lt;-------&gt;OnPause():前台生存周期，活动总是在运行状态。 <img src="http://ww2.sinaimg.cn/mw690/006lPiqbjw1f38w1sk7onj30f50jr40c.jpg" alt="经典示意图"> 在这三种生命周期的基础上衍生出来三种执行顺序：</li><li>执行顺序:杀死进程/新建-&gt;活动 onCreate()--&gt;onStart()--&gt;OnResume()--&gt;用户交互--&gt;OnPause()--&gt;OnStop()--&gt;OnDestory()--&gt;OnCreate();</li><li>执行顺序:活动可见-&gt;返回上一个活动 OnResume()--&gt;OnPause()--&gt;OnResume();</li><li>执行顺序：活动被切换--&gt;重新切换回来成为当前活动 onStart()--&gt;OnResume()--&gt;OnPause()--&gt;onStop()--&gt;onRestart()--OnStart(); <strong>可以看出，activity执行时所操作的方法都是成对出现的，即有开始，就要有结束。</strong></li><li>执行示例1：点击A活动来到B活动，B全部遮挡住A，执行顺序为：A:OnPause()-&gt;B:OnCreate()-&gt;B:OnStart()-&gt;B:OnResume()-&gt;A:onStop();单击back键后的顺序：B:Onpause()-&gt;A:OnRestart()-&gt;A:Onstart()-&gt;A:OnResume()-&gt;B:OnStop()-&gt;B:OnDestroy().</li></ul><h4 id="常操作的几个活动时执行的顺序" tabindex="-1">常操作的几个活动时执行的顺序 <a class="header-anchor" href="#常操作的几个活动时执行的顺序" aria-label="Permalink to &quot;常操作的几个活动时执行的顺序&quot;">​</a></h4><ul><li>启动Activity:onCreate--&gt;OnStart()--&gt;OnResume()</li><li>跳转到其他Activity/home键返回到主屏幕：OnSaveInstanceState()--&gt;OnPause()--&gt;onStop();这也是home键和back键不同的地方，activity并没有被销毁。在数据重置方面，可以使用savedInstanceState来获取onSaveInstanceState()中已经保留的值。</li><li>跳转回来：OnRestart()--&gt;OnStart()--&gt;OnResume();</li><li>BACK键：OnPause()--&gt;onStop()--&gt;onDestory()如果想在按下back键后，实现home键的效果，即活动并非结束重新启动，而是保留在当前的activity，需要重写Back键的回调函数 @Override onBackPressed(){}；然后有两种方法：1.替换成Home键的效果。{Intent.CATEGORY_HOME}2.调用activity提供的方法：moveTaskToBack(true);</li><li>旋转屏幕：将会先保存数据，然后销毁当前的activity,在重新生成一个，并将其保存的数据重置回来，执行顺序如下。</li><li>OnSaveInstanceState()--&gt;Onpause()--&gt;OnStop()--&gt;OnDestory()--&gt;OnCreate()--&gt;OnStart()--&gt;OnRestoreInstanceState()--OnResume();</li></ul><h3 id="调用方法" tabindex="-1">调用方法 <a class="header-anchor" href="#调用方法" aria-label="Permalink to &quot;调用方法&quot;">​</a></h3><ul><li>activity.finish():将activity从Activity栈中移除，并调用activity的onDestory()函数。</li><li>startActivityForResult/OnActivityResult/setResult:获取返回值的调用activity方法</li><li>startActivity(intent):开启一个新的activity,将其入栈。</li><li>所有的activity均需要在Androidmanifest.xml中注册</li><li>自定义的activity类均需要继承activity类。</li></ul><blockquote><p><a href="http://www.cnblogs.com/bastard/archive/2012/04/07/2436262.html" target="_blank" rel="noreferrer">Activity启动和创建过程--只需要了解</a> <a href="http://www.cnblogs.com/JohnTsai/p/4051843.html" target="_blank" rel="noreferrer">Activity经典注释</a> <a href="http://www.cnblogs.com/jasoncc/archive/2011/07/21/2113314.html" target="_blank" rel="noreferrer">Activity生命周期2</a> <a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0724/1481.html" target="_blank" rel="noreferrer">Activity之间传输数据的几种方式</a> <a href="http://blog.csdn.net/luoshengyang/article/details/6689748" target="_blank" rel="noreferrer">Activity启动源代码</a> <a href="http://www.cnblogs.com/meizixiong/p/3170591.html" target="_blank" rel="noreferrer">Activity四种启动方式--下班了，没看</a> <a href="http://www.cnblogs.com/EX32/p/4623764.html" target="_blank" rel="noreferrer">Activity四种启动方式---同上</a></p></blockquote></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--[--><!--[--><div class="comments" data-v-f07f5222><!----></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="image-viewer"><!----></div><!--]--><!--]--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"BpEt8_OE\",\"post_diary_2016-2017_2013-03-01.md\":\"pK-qUJQg\",\"post_diary_2016-2017_2015-12-20-1.md\":\"Cjpso8Zm\",\"post_diary_2016-2017_2015-12-20.md\":\"BDX6wldf\",\"post_diary_2016-2017_2016-01-08.md\":\"CjiDofel\",\"post_diary_2016-2017_2016-02-15.md\":\"CTwgUGGA\",\"post_diary_2016-2017_2016-1-16.md\":\"BlwKSi0M\",\"post_diary_2016-2017_2016-1-2.md\":\"kFAnAEKB\",\"post_diary_2016-2017_2016-10-07.md\":\"ae6t_03h\",\"post_diary_2016-2017_2016-10-31.md\":\"BhIcWEeq\",\"post_diary_2016-2017_2016-2-29.md\":\"DJ999I5X\",\"post_diary_2016-2017_2016-3-12.md\":\"DsIykWzZ\",\"post_diary_2016-2017_2016-3-18.md\":\"yv9M59Wm\",\"post_diary_2016-2017_2016-3-25.md\":\"C3xqC0HH\",\"post_diary_2016-2017_2016-3-29.md\":\"BgTn4099\",\"post_diary_2016-2017_2016-3-3.md\":\"D4PshTnd\",\"post_diary_2016-2017_2016-4-16.md\":\"Bm8eobNH\",\"post_diary_2016-2017_2016-4-29.md\":\"DFatzqtc\",\"post_diary_2016-2017_2016-4-5.md\":\"U0HKGArx\",\"post_diary_2016-2017_2016-4-9.md\":\"BN3g5tOi\",\"post_diary_2016-2017_2016-5-27.md\":\"CsQr2iRZ\",\"post_diary_2016-2017_2016-6-27.md\":\"B0c89Iqu\",\"post_diary_2016-2017_2016-8-14.md\":\"CZpemFjE\",\"post_diary_2016-2017_2016-8-31.md\":\"BNtt5Xvx\",\"post_diary_2016-2017_2016-8-8 .md\":\"CCZjRjm_\",\"post_diary_2016-2017_2016-9-21.md\":\"BUsSFKON\",\"post_diary_2016-2017_2017-02-07.md\":\"xj9BWFHK\",\"post_diary_2016-2017_2017-09-07.md\":\"D2uZCO1L\",\"post_diary_2016-2017_2017-10-14.md\":\"Bc1JOxjc\",\"post_diary_index.md\":\"BXx5eWO4\",\"post_input_input_2025_3.md\":\"C78WctRE\",\"post_list100_todo_2025.md\":\"Bj23lOic\",\"post_output_output_2025_3.md\":\"CpqHpxwh\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"刘宣华\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"首页\",\"nav\":[{\"text\":\"在写\",\"link\":\"/post/input/input_2025_3\"},{\"text\":\"在读\",\"link\":\"/post/output/output_2025_3\"},{\"text\":\"List100\",\"link\":\"/post/list100/todo_2025\"},{\"text\":\"日记\",\"link\":\"/post/diary/\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>